Starting Container
npm warn config production Use `--omit=dev` instead.

> bot-data-service@1.0.0 prestart
> npx prisma generate --schema ../prisma/schema.prisma

npm warn config production Use `--omit=dev` instead.
Prisma schema loaded from ../prisma/schema.prisma

âœ” Generated Prisma Client (v6.14.0) to ./node_modules/.prisma/client in 219ms

Start by importing your Prisma Client (See: https://pris.ly/d/importing-client)

Tip: Need your database queries to be 1000x faster? Accelerate offers you that and more: https://pris.ly/tip-2-accelerate


> bot-data-service@1.0.0 start
> node dist/main.js

2025-08-16T00:53:24.550419446Z [INFO] Prometheus metrics collection enabled hostname="79c7a2c8afc0" pid=50 time=1755305604544
2025-08-16T00:53:24.875151562Z [INFO] Connected to Redis successfully hostname="79c7a2c8afc0" pid=50 time=1755305604791
2025-08-16T00:53:24.875157636Z [INFO] Redis client ready for operations hostname="79c7a2c8afc0" pid=50 time=1755305604794
2025-08-16T00:53:24.875176494Z [INFO] Connected to PostgreSQL (data-sync) hostname="79c7a2c8afc0" pid=50 time=1755305604816
2025-08-16T00:53:24.875190549Z [INFO] Redis health check passed hostname="79c7a2c8afc0" pid=50 time=1755305604819
2025-08-16T00:53:24.875195891Z [INFO] ðŸ”„ Using cached Beds24 refresh token from Redis hostname="79c7a2c8afc0" pid=50 time=1755305604821
2025-08-16T00:53:24.875201784Z [INFO] âœ… Beds24 write token loaded from cache hostname="79c7a2c8afc0" pid=50 source="redis-cache" time=1755305604821 tokenLength=172
2025-08-16T00:53:24.875207702Z [INFO] âœ… Beds24 client initialized successfully hostname="79c7a2c8afc0" pid=50 time=1755305604821
2025-08-16T00:53:24.875212679Z [INFO] [data-sync] listening on :8080 hostname="79c7a2c8afc0" pid=50 time=1755305604825
2025-08-16T00:54:15.039607485Z [INFO] BEDS24_WEBHOOK_TOKEN not configured, skipping verification hostname="79c7a2c8afc0" pid=50 time=1755305650233
2025-08-16T00:54:15.039613801Z [INFO] Beds24 webhook received action="MODIFY" bookingId=74310746 hostname="79c7a2c8afc0" payload={"booking":{"address":"","allowAutoAction":"enable","allowCancellation":{"type":"propertyDefault"},"allowChannelUpdate":"all","allowReview":"default","apiMessage":"","apiReference":"","apiSource":"Direct","apiSourceId":0,"arrival":"2025-12-12","arrivalTime":"","bookingGroup":null,"bookingTime":"2025-08-15T18:23:22Z","cancelTime":"2025-08-16T00:53:59Z","channel":"direct","city":"","comments":"","commission":0,"company":"","country":"","country2":null,"custom1":"","custom10":"","custom2":"","custom3":"","custom4":"","custom5":"","custom6":"","custom7":"","custom8":"","custom9":"","departure":"2025-12-17","deposit":0,"email":"","fax":"","firstName":"","flagColor":"","flagText":"","groupNote":"","id":74310746,"invoiceeId":null,"lang":"","lastName":"","masterId":null,"message":"","mobile":"","modifiedTime":"2025-08-16T00:53:59Z","notes":"","numAdult":2,"numChild":0,"offerId":1,"phone":"","postcode":"","price":0,"propertyId":240061,"rateDescription":"Oferta 1,","reference":"","referer":"pacartagena","refererEditable":"pacartagena","roomId":506591,"roomQty":1,"state":"","status":"cancelled","statusCode":0,"stripeToken":null,"subStatus":"none","tax":0,"title":"","unitId":1,"voucher":""},"infoItems":[],"invoiceItems":[],"messages":[],"retries":0,"timeStamp":"2025-08-16T00:54:09Z"} pid=50 time=1755305650237 type="beds24:webhook"
2025-08-16T00:54:15.039621095Z [INFO] Webhook job queued action="MODIFY" bookingId=74310746 hostname="79c7a2c8afc0" jobId="beds24-sync-74310746" pid=50 time=1755305650245
2025-08-16T00:54:15.039628949Z [INFO] Beds24 webhook job queued action="MODIFY" bookingId=74310746 hostname="79c7a2c8afc0" jobId="beds24-sync-74310746" pid=50 time=1755305650245
2025-08-16T00:57:45.570489134Z [INFO] BEDS24_WEBHOOK_TOKEN not configured, skipping verification hostname="79c7a2c8afc0" pid=50 time=1755305855745
2025-08-16T00:57:45.570509703Z [INFO] Beds24 webhook received action="MODIFY" bookingId=74319297 hostname="79c7a2c8afc0" payload={"booking":{"address":"","allowAutoAction":"enable","allowCancellation":{"type":"propertyDefault"},"allowChannelUpdate":"all","allowReview":"default","apiMessage":"","apiReference":"","apiSource":"Direct","apiSourceId":0,"arrival":"2025-12-01","arrivalTime":"","bookingGroup":null,"bookingTime":"2025-08-16T00:57:23Z","cancelTime":null,"channel":"direct","city":"","comments":"","commission":0,"company":"","country":"","country2":null,"custom1":"","custom10":"","custom2":"","custom3":"","custom4":"","custom5":"","custom6":"","custom7":"","custom8":"","custom9":"","departure":"2025-12-07","deposit":0,"email":"","fax":"","firstName":"","flagColor":"","flagText":"","groupNote":"","id":74319297,"invoiceeId":null,"lang":"","lastName":"","masterId":null,"message":"","mobile":"","modifiedTime":"2025-08-16T00:57:23Z","notes":"","numAdult":2,"numChild":0,"offerId":1,"phone":"","postcode":"","price":0,"propertyId":240061,"rateDescription":"Oferta 1,","reference":"","referer":"pacartagena","refererEditable":"pacartagena","roomId":506591,"roomQty":1,"state":"","status":"confirmed","statusCode":0,"stripeToken":null,"subStatus":"none","tax":0,"title":"PRUEBA WEBHOOOOOOOOOK","unitId":1,"voucher":""},"infoItems":[],"invoiceItems":[],"messages":[],"retries":0,"timeStamp":"2025-08-16T00:57:35Z"} pid=50 time=1755305855746 type="beds24:webhook"
2025-08-16T00:57:45.570524751Z [INFO] Webhook job queued action="MODIFY" bookingId=74319297 hostname="79c7a2c8afc0" jobId="beds24-sync-74319297" pid=50 time=1755305855749
2025-08-16T00:57:45.570534503Z [INFO] Beds24 webhook job queued action="MODIFY" bookingId=74319297 hostname="79c7a2c8afc0" jobId="beds24-sync-74319297" pid=50 time=1755305855749
2025-08-16T01:00:15.699295746Z [INFO] Failed to fetch table data error="\nInvalid `prisma.booking.findMany()` invocation:\n\n{\n  where: {\n    orderBy: \"lastUpdatedBD\",\n    ~~~~~~~\n    order: \"desc\",\n?   AND?: BookingWhereInput | BookingWhereInput[],\n?   OR?: BookingWhereInput[],\n?   NOT?: BookingWhereInput | BookingWhereInput[],\n?   id?: IntFilter | Int,\n?   bookingId?: StringFilter | String,\n?   phone?: StringNullableFilter | String | Null,\n?   guestName?: StringNullableFilter | String | Null,\n?   status?: StringNullableFilter | String | Null,\n?   internalNotes?: StringNullableFilter | String | Null,\n?   propertyName?: StringNullableFilter | String | Null,\n?   arrivalDate?: StringNullableFilter | String | Null,\n?   departureDate?: StringNullableFilter | String | Null,\n?   numNights?: IntNullableFilter | Int | Null,\n?   totalPersons?: IntNullableFilter | Int | Null,\n?   totalCharges?: StringNullableFilter | String | Null,\n?   totalPayments?: StringNullableFilter | String | Null,\n?   balance?: StringNullableFilter | String | Null,\n?   basePrice?: StringNullableFilter | String | Null,\n?   channel?: StringNullableFilter | String | Null,\n?   email?: StringNullableFilter | String | Null,\n?   apiReference?: StringNullableFilter | String | Null,\n?   charges?: JsonFilter,\n?   payments?: JsonFilter,\n?   messages?: JsonFilter,\n?   infoItems?: JsonFilter,\n?   notes?: StringNullableFilter | String | Null,\n?   bookingDate?: StringNullableFilter | String | Null,\n?   modifiedDate?: StringNullableFilter | String | Null,\n?   lastUpdatedBD?: DateTimeFilter | DateTime,\n?   raw?: JsonNullableFilter,\n?   BDStatus?: StringNullableFilter | String | Null\n  },\n  take: 5,\n  skip: 0,\n  orderBy: {\n    id: \"desc\"\n  }\n}\n\nUnknown argument `orderBy`. Available options are marked with ?." hostname="79c7a2c8afc0" pid=50 tableName="Booking" time=1755306015490
2025-08-16T01:00:35.676838455Z [INFO] Fetching Beds24 bookings with advanced filters hostname="79c7a2c8afc0" pid=50 query={} time=1755306028108
2025-08-16T01:00:35.676848011Z [INFO] Beds24 bookings fetched successfully count=80 hostname="79c7a2c8afc0" pages={"nextPageExists":false,"nextPageLink":null} pid=50 time=1755306029122 total=80
2025-08-16T01:03:15.871635683Z [INFO] Failed to fetch table data error="\nInvalid `prisma.booking.count()` invocation:\n\n{\n  select: {\n    _count: {\n      select: {\n        _all: true\n      }\n    }\n  },\n  where: {\n    orderBy: \"lastUpdatedBD\",\n    ~~~~~~~\n    order: \"desc\",\n?   AND?: BookingWhereInput | BookingWhereInput[],\n?   OR?: BookingWhereInput[],\n?   NOT?: BookingWhereInput | BookingWhereInput[],\n?   id?: IntFilter | Int,\n?   bookingId?: StringFilter | String,\n?   phone?: StringNullableFilter | String | Null,\n?   guestName?: StringNullableFilter | String | Null,\n?   status?: StringNullableFilter | String | Null,\n?   internalNotes?: StringNullableFilter | String | Null,\n?   propertyName?: StringNullableFilter | String | Null,\n?   arrivalDate?: StringNullableFilter | String | Null,\n?   departureDate?: StringNullableFilter | String | Null,\n?   numNights?: IntNullableFilter | Int | Null,\n?   totalPersons?: IntNullableFilter | Int | Null,\n?   totalCharges?: StringNullableFilter | String | Null,\n?   totalPayments?: StringNullableFilter | String | Null,\n?   balance?: StringNullableFilter | String | Null,\n?   basePrice?: StringNullableFilter | String | Null,\n?   channel?: StringNullableFilter | String | Null,\n?   email?: StringNullableFilter | String | Null,\n?   apiReference?: StringNullableFilter | String | Null,\n?   charges?: JsonFilter,\n?   payments?: JsonFilter,\n?   messages?: JsonFilter,\n?   infoItems?: JsonFilter,\n?   notes?: StringNullableFilter | String | Null,\n?   bookingDate?: StringNullableFilter | String | Null,\n?   modifiedDate?: StringNullableFilter | String | Null,\n?   lastUpdatedBD?: DateTimeFilter | DateTime,\n?   raw?: JsonNullableFilter,\n?   BDStatus?: StringNullableFilter | String | Null\n  }\n}\n\nUnknown argument `orderBy`. Available options are marked with ?." hostname="79c7a2c8afc0" pid=50 tableName="Booking" time=1755306186711
